<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Your description here" />
        <meta name="author" content="Your Name" />
        <title>Document</title>
        <link rel="stylesheet" href="styles.css" />
        <link rel="stylesheet" href="https://unpkg.com/98.css" />
    </head>
    <body>
        <div id="register" class="window">
            <div class="title-bar">
                <div class="title-bar-text">Add Wallet</div>
                <div class="title-bar-controls">
                    <button
                        aria-label="Close"
                        onClick="closeAddWalletWindow();"
                    ></button>
                </div>
            </div>
            <div class="window-body">
                <button onClick="signInWithMetamask()">
                    <img
                        src="https://static.cdnlogo.com/logos/m/79/metamask.svg"
                        alt="Keys icon"
                        style="width: 12px; height: 12px; margin-right: 4px"
                    />
                    Metamask
                </button>
                <button onClick="signInWithStarknetWallet('argent')">
                    <img
                        src="https://remoteok.com/cdn-cgi/image/format=auto,fit=contain,width=16,height=16,quality=80/https://remoteok.com/assets/img/jobs//b75a135198c3af6d6af0db7092560c781631709111.png?"
                        alt="Argent logo"
                        style="width: 12px; height: 12px; margin-right: 4px"
                    />
                    Ready
                </button>
                <button onClick="signInWithStarknetWallet('braavos')">
                    <img
                            src="https://ethereum.org/_next/image/?url=%2F_next%2Fstatic%2Fmedia%2Fbraavos_wallet.bbf474ed.png&w=1080&q=75"
                            alt="Braavos icon"
                            style="width: 12px; height: 12px; margin-right: 4px"
                    />
                    Braavos
                </button>
            </div>
        </div>

        <div id="window" class="window">
            <div class="title-bar">
                <div class="title-bar-text">Curvy OS</div>
                <div class="title-bar-controls">
                    <button aria-label="Minimize"></button>
                    <button aria-label="Maximize"></button>
                    <button aria-label="Close"></button>
                </div>
            </div>
            <header style="text-align: right; padding: 6px">
                <label for="sdk-api-url">Curvy API:</label>
                <input
                    id="sdk-api-url"
                    type="text"
                    onInput="handleSDKConfigurationChange();"
                />

                <label for="sdk-api-key">API Key:</label>

                <input
                    id="sdk-api-key"
                    type="password"
                    onInput="handleSDKConfigurationChange();"
                />

                <label for="sdk-network">Network:</label>
                <select
                    id="sdk-network"
                    onInput="handleSDKConfigurationChange();"
                ></select>

                <button onClick="saveSDKConfiguration()">
                    <img
                        src="https://win98icons.alexmeub.com/icons/png/floppy_drive_3_5-2.png"
                        alt="Reload icon"
                        style="width: 12px; height: 12px"
                    />
                    Save
                </button>
            </header>
            <menu role="tablist">
                <li
                    role="tab"
                    aria-selected="true"
                    data-tab-id="walletsTab"
                    onclick="showTabContent('walletsTab')"
                >
                    <img
                        src="https://win98icons.alexmeub.com/icons/png/users_key-1.png"
                        alt="Key Icon"
                        style="width: 12px; height: 12px; margin-right: 4px"
                    />
                    Wallets
                </li>
                <li
                    role="tab"
                    data-tab-id="eventsTab"
                    onclick="showTabContent('eventsTab')"
                >
                    <img
                        src="https://win98icons.alexmeub.com/icons/png/time_and_date-1.png"
                        alt="Events Icon"
                        style="width: 12px; height: 12px; margin-right: 4px"
                    />
                    <Events></Events>
                </li>
                <li
                    role="tab"
                    data-tab-id="announcementsTab"
                    onclick="showTabContent('announcementsTab')"
                >
                    <img
                        src="https://win98icons.alexmeub.com/icons/png/tools_gear-1.png"
                        alt="Announcements Icon"
                        style="width: 12px; height: 12px; margin-right: 4px"
                    />
                    Announcements
                </li>
                <li
                        role="tab"
                        data-tab-id="aggregatorTab"
                        onclick="showTabContent('aggregatorTab')"
                >
                    <img
                            src="https://win98icons.alexmeub.com/icons/png/catalog-1.png"
                            alt="Aggregator Icon"
                            style="width: 12px; height: 12px; margin-right: 4px"
                    />
                    Aggregator
                </li>
            </menu>
            <div class="window" role="tabpanel">
                <div id="walletsTab" class="window-body">
                    <aside>
                        <ul class="tree-view" id="wallets">
                            <li>
                                <img src="https://win98icons.alexmeub.com/icons/png/catalog_no-1.png" alt="No Wallets Icon"
                                style="width: 12px; height: 12px; margin-right: 4px">
                                <i>No wallets registered</i>
                            </li>
                        </ul>
                        <div>
                            <div id="hideZeroBalancesContainer">
                                <input type="checkbox" id="hideZeroBalances" onChange="populateWalletsTree()" checked>
                                <label for="hideZeroBalances">Hide zero balances</label>
                            </divi>

                            <br>

                                <button
                                        id="refreshBalancesButton"
                                        onClick="refreshBalances()"
                                >
                                    <img
                                            src="https://win98icons.alexmeub.com/icons/png/search_web-1.png"
                                            alt="Refresh Balances Icon"
                                            style="
                                    width: 12px;
                                    height: 12px;
                                    margin-right: 4px;
                                "
                                    />
                                    Refresh balances
                                </button>

                            <br>

                                <button
                                        id="addWalletButton"
                                        onClick="openAddWalletWindow()"
                                >
                                    <img
                                            src="https://win98icons.alexmeub.com/icons/png/message_file-1.png"
                                            alt="New Icon"
                                            style="
                                    width: 12px;
                                    height: 12px;
                                    margin-right: 4px;
                                "
                                    />
                                    Sign in to Curvy
                                </button>

                        </div>

                    </div>
                    </aside>
                    <main>
                        <fieldset>
                            <legend>Send funds</legend>
                                <div class="field-row">
                                    <label for="fromAddress">From:</label>
                                    <input
                                        id="fromAddress"
                                        disabled="true"
                                        type="text"
                                        placeholder="Select an address from the list"
                                    />
                                </div>
                                <div class="field-row">
                                    <label for="toAddress">To:</label>
                                    <input
                                        id="toAddress"
                                        type="text"
                                        placeholder="Enter a Curvy handle or address"
                                    />
                                </div>
                                <div class="field-row">
                                    <label for="amount">Amount:</label>
                                    <input
                                        id="amount"
                                        type="text"
                                        placeholder="0.01"
                                    />
                                </div>
                                <div class="field-row">
                                    <label for="currency">Currency:</label>
                                    <input type="text" id="currency" disabled/>
                                </div>
                                <div class="field-row">
                                    <label for="network">Network:</label>
                                    <input type="text" id="network" disabled/>
                                </div>
                                <div class="field-row">
                                    <label for="fee">Fee:</label>
                                    <input
                                        type="text"
                                        disabled
                                        id="fee"
                                        value="-"
                                    />
                                </div>

                                <button onClick="estimateFee()" id="estimate-fee" disabled>Estimate fees</button>
                                <button onClick="send2()" id="send" disabled>Send</button>
                        </fieldset>
                        <fieldset>
                            <legend>Resolve Curvy handle to stealth address</legend>
                            <div class="field-row">
                                <label for="handle">Curvy handle:</label>
                                <input id="handle" type="text">
                            </div>
                            <div class="field-row">
                                <label for="networkForStealthAddress">Network:</label>
                                <select id="networkForStealthAddress">
                                </select>
                            </div>
                            <div class="field-row">
                                <label for="stealthAddress">Stealth address:</label>
                                <input id="stealthAddress" type="text" disabled>
                            </div>
                            <button id="get-new-stealth-address" onclick="getNewStealthAddress()">Get new stealth address</button>
                        </fieldset>
                    </main>
                </div>
                <div id="eventsTab" class="window-body">
                    <div class="sunken-panel">
                        <table id="eventsTable" class="interactive">
                            <thead>
                                <tr>
                                    <th>Timestamp</th>
                                    <th>Type</th>
                                    <th>Data</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
                <div id="announcementsTab" class="window-body">
                    <div class="sunken-panel">
                        <table id="announcementsTable" class="interactive">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Created At</th>
                                    <th>Network</th>
                                    <th>View Tag</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
                <div id="aggregatorTab" class="window-body" style="display: none; visibility: hidden;">
                    <fieldset>
                        <legend>Aggregator Request</legend>

                        <div class="field-row">
                            <label for="aggregator-mode">Mode:</label>
                            <select id="aggregator-mode">
                                <option value="Deposit">Deposit</option>
                                <option value="Withdraw">Withdraw</option>
                                <option value="Aggregation">Aggregation</option>
                            </select>
                        </div>

                        <div class="field-row" style="flex-direction: column;">
                            <label for="aggregator-payload">Payload (JSON):</label>
                            <textarea id="aggregator-payload" style="width: 100%; height: 120px;"></textarea>
                        </div>

                        <div class="field-row">
                            <button onclick="submitAggregatorRequest()">Submit</button>
                        </div>

                        <div class="field-row">
                            <label for="aggregator-request-id">Request ID:</label>
                            <input id="aggregator-request-id" type="text" disabled style="width: 100%;">
                        </div>

                        <div class="field-row">
                            <label for="aggregator-status">Status:</label>
                            <input id="aggregator-status" type="text" disabled style="width: 100%;">
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="status-bar">
                <p class="status-bar-field">Total stealth addresses: <span id="totalStealthAddresses">0</span></p>
                <p class="status-bar-field">Total announcements: <span id="totalAnnouncements">0</span></p>
                <p class="status-bar-field">Total balance: <b id="totalBalance">$0.00</b></p>
            </div>
        </div>
            <script type="module" src="index.js"></script>
</body>
</html>
